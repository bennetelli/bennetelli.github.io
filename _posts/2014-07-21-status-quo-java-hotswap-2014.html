---
layout: post
title: Status Quo - Java HotSwap 2014
date: '2014-07-21T10:48:00.001-07:00'
author: Bennet Schulz
tags:
- redeployment
- Java
- Java EE
- hotswap
- hot deployment
- javaee
- dcevm
- dynamic code evolution
modified_time: '2014-07-21T13:01:28.774-07:00'
blogger_id: tag:blogger.com,1999:blog-3189340956761677857.post-224045329704937336
blogger_orig_url: http://www.bennet-schulz.com/2014/07/status-quo-java-hotswap-2014.html
permalink: /:year/:month/:title.html
---

<h3></h3><h3><span style="font-weight: normal;">Vor 12 Jahren, im Jahre 2002 führte Sun Java 1.4 mit dem Codenamen Merlin ein. Zu den Features dieser Version zählte auch das JVM HotSwap. Dieses HotSwapping erlaubt es, class Bytecode innerhalb einer laufenden JVM während des Debuggens zu aktualisieren. Dadurch wird während des Debuggens geänderter Code class File weise aktualisiert. Auf ein Starten und erneutes Debuggen der laufenden Anwendung kann dadurch verzichtet werden.</span></h3><h3><span style="font-weight: normal;">Leider ist das Hotswapping nur auf Änderungen innerhalb von Methoden beschränkt. Ein Hinzufügen oder Löschen von Methoden und/oder Attributen, sowie alle anderen möglichen Änderungen führen auf Grund der Beschränkung in jedem Fall zu einem kompletten ersetzen des class bytecodes und nicht zum alleinigen Austausch der geänderten Zeilen Code.</span></h3><h3><span style="font-weight: normal;"><br /></span></h3><h3><span style="font-weight: normal;">Diese Beschränkung führte zu einem lange offenen und oft gevoteten <a href="http://bugs.java.com/bugdatabase/view_bug.do?bug_id=4910812">Bug</a>, der bis heute nicht behoben wurde.&nbsp;</span></h3><h3><span style="font-weight: normal;">&nbsp;</span></h3><h3><span style="font-weight: normal;">Diesem Problem hat sich Thomas Wuerthinger angenommen und stellte erstmals auf der JavaOne 2010 das Open Source Projekt "Dynamic Code Evolution for the Java HotSpot Virtual Machine" vor. Dabei handelt es sich um ein Forschungsprojekt der Johannes Kepler Universität Linz. Dieses Projekt wird von Oracle und Guidwire gesponsert.</span></h3><h3><span style="font-weight: normal;"><br /></span></h3><h3><span style="font-weight: normal;">Es soll uneingeschränktes Hotswapping in der JVM zur Laufzeit ermöglichen. Dabei soll es sich nicht wie bisher nur auf Änderungen innerhalb von Methoden beschränken, sondern auch das Hinzufügen und Löschen von Feldern und Methoden ermöglichen. Außerdem soll es möglich werden, implementierte Interfaces oder Oberklassen zu ändern. Und das alles ohne Performance-Einbußen. Dabei soll die JVM ohne zusätzliche Tools einfach innerhalb des eigenen Debuggers der jeweiligen IDE verwendet werden können.&nbsp;</span></h3><h3><span style="font-weight: normal;"><br /></span></h3><h3><span style="font-weight: normal;">Neben einigen <a href="http://ssw.jku.at/dcevm/publications/">Publikationen</a>, Technischen <a href="https://wikis.oracle.com/download/attachments/23953432/wuerthinger-hotswap-20090401.pdf?version=1&amp;modificationDate=1252783203000">Dokumentationen</a> gibt es auch ein <a href="https://www.youtube.com/watch?v=eLFxCRaVh-g">Youtube Tutorial</a> zum Ausprobieren dieser JVM Erweiterung.</span></h3><h3><span style="font-weight: normal;"><br /></span></h3><h3><span style="font-weight: normal;"><b>Stand 2014.</b> Aktuell, vier Jahre nach der Vorstellung auf der JavaOne und drei Jahre nach dem Einreichen seiner Dissertation (<a href="http://ssw.jku.at/Research/Papers/Wuerthinger11PhD/Wuerthinger11PhD.pdf">Link</a>) über das Dynamic Code Evolution Projekt arbeitet Thomas Wuerthinger für Oracle Labs Austria und scheint er sich anderen Projekten gewidmet zu haben. Der letzte Bugfix liegt schon Jahre zurück und der letzte Build des Projektes basiert auf dem schon knapp vier Jahre zurückliegenden JDK7-Build #102</span>.</h3><h3></h3><h3><span style="font-weight: normal;">Auf <a href="https://github.com/dcevm/dcevm/">GitHub</a> gibt es zwar einen Fork des DCE VM Projektes. In diesem befinden sich allerdings lediglich drei Commiter und auf Grund dessen, dass Wuerthinger sich anderen Projekten widmet, wird sich bezüglich der Dynamic Code Evolution in nächster Zeit wohl nichts ändern.&nbsp;</span></h3><h3><span style="font-weight: normal;">&nbsp;</span></h3><h3><span style="font-weight: normal;">Die Hoffnung ist allerdings noch nicht komplett gestorben. Es gibt einen weiteren Fork namens <a href="http://www.hotswapagent.org/">HotSwapAgent</a>, der zumindest optisch mehr her macht als der vorherige Fork des DCE VM Projektes. Auch die Technologie-Unterstützung scheint mehr herzugeben. Laut der Beschreibung des Projektes unterscheidet es sich von JRebel in den Folgenden Punkten:</span></h3><ul><li><h3><span style="font-weight: normal;">JRebel ist aktuell ausgereifter und unterstützt mehr Plugins,</span></h3></li></ul><ul><li><h3><span style="font-weight: normal;">JRebel ist weder Open Source, noch kostenlos</span></h3></li></ul><ul><li><h3><span style="font-weight: normal;">Es bedarf eines speziellen Plugins</span></h3></li></ul><h3><span style="font-weight: normal;">Wuerthinger hat mit seinem <a href="http://openjdk.java.net/jeps/159">Java Enhancement Proposal (JEP159)</a> einen Vorschlag eingereicht, der das JVM HotSwap um das Hinzufügen und Entfernen von Methoden, statischen Variablen, sowie Instanz-Variablen ermöglichen würde. Das würde das Problem zwar nicht komplett lösen, aber man wäre schon einen Schritt weiter. An kommerzielle HotSwap Alternativen wird es allerdings auch nach dem Einarbeiten des Enhancements leider nicht vorbeikommen.</span></h3>